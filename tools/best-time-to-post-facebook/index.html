<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>ุฃูุถู ููุช ูููุดุฑ ุนูู ููุณ ุจูู โ ุฃุฏุงุฉ ูุฌุงููุฉ ุจุงูุนุฑุจูุฉ | MarketAPro</title>
  <meta name="description" content="ุงูุชุดู ุฃูุถู ููุช ูููุดุฑ ุนูู ููุณ ุจูู ุญุณุจ ุจูุฏ ุฌูููุฑู ูููุน ุงูุญุณุงุจ ูุงููุฏู (ุชูุงุนู/ูุตูู/ูุจูุนุงุช) ูููุน ุงููุญุชูู ูุงููุฌุงู + ุชุญููู ุชูููุช ูุน ูุฑุงุนุงุฉ DST + ุฎุทุฉ ุงุฎุชุจุงุฑ 14 ููู." />
  <link rel="canonical" href="https://marketapro.com/tools/best-time-to-post-facebook/" />

  <!-- Open Graph -->
  <meta property="og:title" content="ุฃูุถู ููุช ูููุดุฑ ุนูู ููุณ ุจูู โ MarketAPro" />
  <meta property="og:locale" content="ar_AR" />
  <meta property="og:description" content="ุฃุฏุงุฉ ุนุฑุจูุฉ ูุฌุงููุฉ ุชูุชุฑุญ ุฃูุถู ุฃููุงุช ุงููุดุฑ ุญุณุจ ุงูุจูุฏ ูููุน ุงูุญุณุงุจ ูุงููุฏู + ุชุญููู ุชูููุช + ูุต ุฌุงูุฒ ูููุณุฎ." />
  <meta property="og:url" content="https://marketapro.com/tools/best-time-to-post-facebook/" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://marketapro.com/assets/og-best-time-facebook.jpg" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="https://marketapro.com/assets/og-best-time-facebook.jpg" />

  <link rel="stylesheet" href="/style.css" />

  <!-- WebApplication Schema -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebApplication",
    "name":"ุฃูุถู ููุช ูููุดุฑ ุนูู ููุณ ุจูู",
    "url":"https://marketapro.com/tools/best-time-to-post-facebook/",
    "applicationCategory":"BusinessApplication",
    "operatingSystem":"Any",
    "description":"ุฃุฏุงุฉ ุนุฑุจูุฉ ูุฌุงููุฉ ุชูุชุฑุญ ุฃูุถู ุฃููุงุช ุงููุดุฑ ุนูู ููุณ ุจูู ุญุณุจ ุงูุจูุฏ ูููุน ุงูุญุณุงุจ ูุงููุฏู ูุน ุชูุตูุงุช ุนูููุฉ ูุชุญููู ุชูููุช (ูุน ูุฑุงุนุงุฉ DST).",
    "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},
    "publisher":{"@type":"Organization","name":"MarketAPro","url":"https://marketapro.com/"}
  }
  </script>

  <!-- โ FAQ Schema (Facebook-specific) โ FIXED -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {
        "@type":"Question",
        "name":"ูู ููุฌุฏ ููุช ุซุงุจุช ููุงุณุจ ููุฌููุน ูููุดุฑ ุนูู ููุณ ุจููุ",
        "acceptedAnswer":{
          "@type":"Answer",
          "text":"ูุง ููุฌุฏ ููุช ูุงุญุฏ ููุงุณุจ ุงูุฌููุน. ุฃูุถู ููุช ูุนุชูุฏ ุนูู ุจูุฏ ุงูุฌูููุฑุ ูููุน ุงููุญุชูู (Reels/ุฑูุงุจุท/ููุดูุฑุงุช)ุ ููุดุงุท ุงูุฌูููุฑ ูู Page Insights / Meta Business Suite. ูุฐู ุงูุฃุฏุงุฉ ุชุนุทู ุงูุชุฑุงุญุงุช ุนุงูุฉ ูููุฉ ูุชุจุฏุฃ ูููุง ุซู ุชุฎุชุจุฑ ูุชุซุจุช ุงูุฃูุถู."
        }
      },
      {
        "@type":"Question",
        "name":"ูู ุชุฎุชูู ุฃููุงุช ุงููุดุฑ ุจูู ุงูุฌุฑูุจุงุช ูุงูุตูุญุงุช ุนูู ููุณ ุจููุ",
        "acceptedAnswer":{
          "@type":"Answer",
          "text":"ูุนู. ุบุงูุจูุง ุงูุฌุฑูุจุงุช ุชูุดุท ูุณุงุกู (ุฎุตูุตูุง 20:00โ22:00) ูุฃู ุงููุงุณ ุชุชูุงุนู ุจุนุฏ ุงูุนููุ ุจูููุง ุตูุญุงุช ุงูุฃุนูุงู ูุฏ ุชุณุชููุฏ ูู ุฃููุงุช ุงูุฏูุงู (10:00โ12:00) ููุฑูุงุจุท ูุงููุญุชูู ุงููููู."
        }
      },
      {
        "@type":"Question",
        "name":"ููู ุฃุญุตู ุนูู ุฃุฏู ุฃููุงุช ูุตูุญุชูุ",
        "acceptedAnswer":{
          "@type":"Answer",
          "text":"ุฑุงุฌุน Meta Business Suite / Page Insights ููุนุฑูุฉ ูุชู ูููู ุฌูููุฑู ูุชุตููุงุ ุซู ุงุฎุชุจุฑ 3 ุฃููุงุช ููุฏุฉ 14 ููููุง ูุน ููุณ ููุน ุงููุญุชููุ ููุงุฑู ุงููุตูู ูุงูุชูุงุนู ูุงูุฑุณุงุฆู (ูููุฑูุงุจุท: ุงูููุฑุงุช)."
        }
      }
    ]
  }
  </script>

  <!-- Breadcrumb -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"ุงูุฑุฆูุณูุฉ","item":"https://marketapro.com/"},
      {"@type":"ListItem","position":2,"name":"ุงูุฃุฏูุงุช","item":"https://marketapro.com/tools/"},
      {"@type":"ListItem","position":3,"name":"ุฃูุถู ููุช ูููุดุฑ ุนูู ููุณ ุจูู","item":"https://marketapro.com/tools/best-time-to-post-facebook/"}
    ]
  }
  </script>

  <style>
    .wrap{display:grid;grid-template-columns:1.05fr .95fr;gap:14px;margin-top:18px}
    @media (max-width: 900px){.wrap{grid-template-columns:1fr}}

    .field{margin-top:10px}
    label{display:block;color:var(--muted);font-size:13px;margin-bottom:6px}

    select, input{
      width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      color:var(--text);
      outline:none;
    }

    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media (max-width: 520px){.row{grid-template-columns:1fr}}

    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}

    .btn{
      display:inline-flex;align-items:center;justify-content:center;
      gap:8px;
      padding:12px 14px;
      border-radius:14px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.02);
      color:var(--text);
      cursor:pointer;
      text-decoration:none;
      font-weight:800;
      user-select:none;
    }
    .btn.primary{
      background:linear-gradient(135deg, rgba(92, 135, 255, .22), rgba(0,0,0,.02));
      border-color:rgba(92, 135, 255, .55);
    }
    .btn.secondary{background:rgba(255,255,255,.02)}
    .btn:active{transform:translateY(1px)}

    .hint{font-size:13px;color:var(--muted);margin-top:8px}
    .divider{height:1px;background:var(--border);margin:14px 0}
    .list{margin:10px 0 0;padding-left:18px;color:var(--muted);line-height:1.9}

    .chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .chip{
      padding:7px 10px;border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.02);
      color:var(--text);font-size:13px;font-weight:800;
    }
    .badge{
      display:inline-flex;align-items:center;gap:6px;
      padding:8px 10px;border-radius:999px;
      background:rgba(255,255,255,.02);
      border:1px solid var(--border);
      color:var(--muted);
      font-size:13px;
      margin-top:10px;
      flex-wrap:wrap;
    }
    .scoreRow{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .score{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 10px;border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.02);
      color:var(--text);
      font-size:13px;
      font-weight:800;
    }
    .score small{font-weight:700;color:var(--muted)}
    .noteBox{
      border:1px dashed var(--border);
      border-radius:14px;
      padding:10px 12px;
      background:rgba(255,255,255,.02);
      color:var(--muted);
      line-height:1.9;
      margin-top:10px;
    }
    .toast{
      position:fixed;left:16px;bottom:16px;
      background:rgba(0,0,0,.65);
      border:1px solid var(--border);
      border-radius:14px;
      padding:10px 12px;
      color:var(--text);
      display:none;
      max-width: 360px;
      z-index: 9999;
    }
    .mini{font-size:12px;color:var(--muted);margin-top:6px;line-height:1.8}
    .anchor{scroll-margin-top: 90px;}
  </style>
</head>

<body>
<a class="skip-link" href="#content">ุชุฎุทู ุฅูู ุงููุญุชูู</a>

<header class="header">
  <div class="container header-inner">
    <a class="brand" href="/" aria-label="ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ">
      <div class="brand-badge" aria-hidden="true"></div>
      <div>
        <p class="brand-title">MarketAPro</p>
        <p class="brand-sub">ุฃูุถู ููุช ูููุดุฑ</p>
      </div>
    </a>

    <nav class="nav" aria-label="ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ">
      <a href="/">ุงูุฑุฆูุณูุฉ</a>
      <a class="active" href="/tools/">ุงูุฃุฏูุงุช</a>
      <a href="https://vivamediacreative.com/ar/" rel="noopener">Viva Media Creative</a>
    </nav>
  </div>
</header>

<main id="content" class="container">
  <section class="hero">
    <div class="card">
      <h1 style="margin:0 0 8px;font-size:28px;line-height:1.4">ุฃูุถู ููุช ูููุดุฑ ุนูู ููุณ ุจูู</h1>

      <p class="note" style="margin-top:10px">
        ูุฐู ุงูุฃุฏุงุฉ ุชูุชุฑุญ <strong>ุฃูุถู ุฃููุงุช ุงููุดุฑ ุนูู ููุณ ุจูู</strong> ูุจุฏุงูุฉ ูููุฉ ุญุณุจ ุจูุฏ ุงูุฌูููุฑ ูููุน ุงูุญุณุงุจ ูุงููุฏู ูููุน ุงููุญุชูู โ
        ุซู ุชุฎุชุจุฑ ูุชุซุจูุช ุงูุฃูุถู ุจูุงุกู ุนูู <strong>Meta Business Suite / Page Insights</strong>.
      </p>

      <div class="noteBox">
        <strong>ููุณ ุจูู ูุฎุชูู ุนู ุฅูุณุชุบุฑุงู:</strong>
        <ul class="list" style="margin-top:6px">
          <li><strong>ุงูุฑูุงุจุท (Link)</strong> ูุฏ ุชุนูู ุฃูุถู ุตุจุงุญูุง/ููุช ุงูุฏูุงู ุฎุตูุตูุง B2B.</li>
          <li><strong>ุงูุฌุฑูุจุงุช</strong> ุชูุดุท ุบุงูุจูุง ูุณุงุกู (ุจุนุฏ ุงูุนูู) ูุฃู ุงููุงุณ ุชุฏุฎู ููููุงุด.</li>
          <li><strong>Reels</strong> ุชููู ูููุณุงุก ูุนุทูุฉ ููุงูุฉ ุงูุฃุณุจูุนุ ููู โุงูุฑูุงุจุท/ุงูููุดูุฑุงุชโ ุณููููุง ูุฎุชูู.</li>
        </ul>
      </div>

      <div class="sub-links" style="margin-top:10px">
        <a href="/news/best-time-to-post-facebook/" title="ุฃูุถู ููุช ูููุดุฑ ุนูู ููุณ ุจูู">
          ุงูุฑุฃ ุงูุฏููู ุงููุงูู: ุฃูุถู ููุช ูููุดุฑ ุนูู ููุณ ุจูู
        </a>
      </div>

      <nav aria-label="Breadcrumb" class="note" style="margin-top:10px">
        <a href="/">ุงูุฑุฆูุณูุฉ</a> โ
        <a href="/tools/">ุงูุฃุฏูุงุช</a> โ
        <span>ุฃูุถู ููุช ูููุดุฑ ุนูู ููุณ ุจูู</span>
      </nav>

      <p style="margin:10px 0 0;color:var(--muted)">
        โ ููุฒุฉ ูููุฉ: ููููู ุชุญููู ุงูุฃููุงุช ุจูู <strong>ุชูููุช ุงูุฌูููุฑ</strong> ู<strong>ุชูููุชู ุงููุญูู</strong> โ ูุน ุฎูุงุฑ โุงูุชุฎุทูุท ููุฐุง ุงูุฃุณุจูุนโ ูุชุฌูุจ ูุฑู DST.
      </p>

      <div class="chips" aria-label="ููุฒุงุช ุงูุฃุฏุงุฉ">
        <span class="chip">ุญุณุจ ุงูุจูุฏ</span>
        <span class="chip">ุญุณุจ ุงููุฏู</span>
        <span class="chip">ุญุณุจ ููุน ุงูุญุณุงุจ</span>
        <span class="chip">ุชุญููู ุชูููุช + DST</span>
        <span class="chip">ุฃูุงู ุนูู/ููููุฏ</span>
        <span class="chip">Score ุจุณูุท</span>
        <span class="chip">ูุต ุฌุงูุฒ ูููุณุฎ</span>
      </div>
    </div>
  </section>

  <section class="wrap">
    <!-- Inputs -->
    <div class="card" aria-label="ุงุฎุชูุงุฑุงุช ุงูุฃุฏุงุฉ">
      <form id="timeForm" novalidate>
        <div class="row">
          <div class="field">
            <label for="country">ุจูุฏ ุงูุฌูููุฑ ุงูุฃุณุงุณู</label>
            <select id="country">
              <option value="gulf">ุงูุฎููุฌ (ุงูุณุนูุฏูุฉ/ุงูุฅูุงุฑุงุช/ุงููููุช/ูุทุฑ/ุงูุจุญุฑูู)</option>
              <option value="egypt">ูุตุฑ</option>
              <option value="levant">ุจูุงุฏ ุงูุดุงู (ุงูุฃุฑุฏู/ูุจูุงู/ุณูุฑูุง/ููุณุทูู)</option>
              <option value="maghreb">ุงููุบุฑุจ ุงูุนุฑุจู (ุงููุบุฑุจ/ุงูุฌุฒุงุฆุฑ/ุชููุณ/ููุจูุง)</option>
              <option value="europe">ุฃูุฑูุจุง</option>
              <option value="global">ุฌูููุฑ ุนุงููู/ูุฎุชูุท</option>
            </select>
            <div class="hint">ุงุฎุชุฑ ุงูุฃูุฑุจ ูุชูููุช ุฌูููุฑู.</div>
          </div>

          <div class="field">
            <label for="goal">ูุฏูู ุงูุฃุณุงุณู</label>
            <select id="goal">
              <option value="engagement">ุฒูุงุฏุฉ ุงูุชูุงุนู (Engagement)</option>
              <option value="reach">ุฒูุงุฏุฉ ุงููุตูู (Reach)</option>
              <option value="sales">ูุจูุนุงุช / Leads</option>
              <option value="brand">ูุนู ุจุงูุนูุงูุฉ (Brand)</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label for="type">ููุน ุงูุญุณุงุจ</label>
            <select id="type">
              <option value="page">ุตูุญุฉ (Page)</option>
              <option value="group">ุฌุฑูุจ/ูุฌุชูุน (Group)</option>
              <option value="creator">ุตุงูุน ูุญุชูู (Creator)</option>
              <option value="personal">ุดุฎุตู</option>
            </select>
          </div>

          <div class="field">
            <label for="format">ููุน ุงููุญุชูู</label>
            <select id="format">
              <option value="reels">Reels</option>
              <option value="video">Video</option>
              <option value="post">Post (ูุต/ุตูุฑุฉ)</option>
              <option value="link">Link</option>
              <option value="mixed">ูุฎุชูุท</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label for="audience">ููุน ุงูุฌูููุฑ</label>
            <select id="audience">
              <option value="b2c">B2C (ุฌูููุฑ ุนุงู)</option>
              <option value="b2b">B2B (ูููู/ุดุฑูุงุช)</option>
            </select>
            <div class="hint">ููู ุฎุตูุตูุง ููุฑูุงุจุท ูุงููุญุชูู ุงููููู.</div>
          </div>

          <div class="field">
            <label for="industry">ุงููุฌุงู (ุงุฎุชูุงุฑู)</label>
            <select id="industry">
              <option value="general">ุนุงู</option>
              <option value="entertainment">ุชุฑููู/ูููุฒ</option>
              <option value="education">ุชุนูููู</option>
              <option value="ecommerce">ุชุฌุงุฑุฉ ุฅููุชุฑูููุฉ</option>
              <option value="local">ุฎุฏูุงุช ูุญููุฉ</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label for="daysMode">ุฃูุงู ุงูุฃุณุจูุน</label>
            <select id="daysMode">
              <option value="all" selected>ูู ุงูุฃูุงู</option>
              <option value="workdays">ุฃูุงู ุงูุนูู (ุชูุฑูุจูุง)</option>
              <option value="weekend">ุงูููููุฏ (ุชูุฑูุจูุง)</option>
            </select>
            <div class="mini">ููุงุญุธุฉ: ุงูููููุฏ ููุง โุชูุฑูุจูโ (ุฌูุนุฉ/ุณุจุช/ุฃุญุฏ) ูุฃู ุงูุนุทูุฉ ุชุฎุชูู ุญุณุจ ุงูุจูุฏ.</div>
          </div>

          <div class="field">
            <label for="planning">ุญุณุงุจ ุงูุชุญููู ุญุณุจ</label>
            <select id="planning">
              <option value="today" selected>ุชูููุช ุงูููู (ุงูุขู)</option>
              <option value="thisweek">ุงูุชุฎุทูุท ููุฐุง ุงูุฃุณุจูุน (ุชูููู ูุฎ DST)</option>
            </select>
            <div class="hint">ูู ูู ุชุบููุฑ ุตููู/ุดุชูู ูุฑูุจุ ุงุฎุชุฑ โูุฐุง ุงูุฃุณุจูุนโ.</div>
          </div>
        </div>

        <div class="divider"></div>

        <div class="row">
          <div class="field">
            <label for="tzMode">ุนุฑุถ ุงูุฃููุงุช ุญุณุจ</label>
            <select id="tzMode">
              <option value="audience" selected>ุชูููุช ุงูุฌูููุฑ</option>
              <option value="local" id="tzLocalOpt">ุชูููุชู</option>
            </select>
            <div class="hint">ูู ุฌูููุฑู ุจุงูุฎููุฌ ูุฃูุช ุจุฃููุงููุง: ูุนูู โุชูููุชูโ ูุฑุคูุฉ ุงูููุช ุงูููุงุณุจ ูู ุฃูุช.</div>
          </div>

          <div class="field">
            <label for="localTz">ุชูููุชู ุงููุญูู (IANA)</label>
            <input id="localTz" value="Europe/Berlin" placeholder="ูุซุงู: Europe/Berlin" />
            <div class="hint">ุณูุชู ุชุนุจุฆุชู ุชููุงุฆููุง ูู ุฌูุงุฒู (ุฅู ุฃููู).</div>
          </div>
        </div>

        <div class="actions">
          <button type="submit" class="btn primary" id="submitBtn">ุงุนุฑุถ ุฃูุถู ุงูุฃููุงุช</button>
          <button type="button" id="copyBtn" class="btn secondary">ูุณุฎ ุงูููุฎุต</button>
          <button type="button" id="shareBtn" class="btn secondary">ูุดุงุฑูุฉ</button>
          <button type="button" id="insightsBtn" class="btn secondary">ุงูุชุญ Insights ูุนููููู</button>
          <button type="button" id="clearBtn" class="btn secondary">ูุณุญ</button>
        </div>

        <p class="hint" id="hint" role="status" aria-live="polite"></p>
      </form>
    </div>

    <!-- Output -->
    <div class="card" id="output" style="display:none" aria-label="ูุชุงุฆุฌ ุงูุฃุฏุงุฉ">
      <h2 style="margin:0 0 8px;font-size:18px">ุงููุชูุฌุฉ ุงูููุชุฑุญุฉ</h2>

      <div class="badge" id="tzBadge">ุงูุฃููุงุช ุงููุนุฑูุถุฉ ุจุชูููุช: โ</div>

      <div class="scoreRow" id="scoreRow" aria-label="ุชูููู ุณุฑูุน">
        <!-- filled by JS -->
      </div>

      <div class="noteBox" style="margin-top:10px">
        <strong>ุชูุจูู ููู:</strong> ูุฐู <strong>ุชูุตูุงุช ุนุงูุฉ</strong> ูุจููุฉ ุนูู ุฃููุงุท ุงุณุชุฎุฏุงู ุดุงุฆุนุฉ. ููุญุตูู ุนูู ุฃุฏู ูุชูุฌุฉ: ุงุฎุชุจุฑ 3 ุฃููุงุช ููุฏุฉ 14 ููููุง ูุฑุงูุจ Page Insights.
        <div class="mini" id="dstNote" style="margin-top:6px"></div>
      </div>

      <p class="hint" id="meta"></p>

      <div class="divider"></div>

      <h3 style="margin:0 0 6px;font-size:16px">ุฃูุถู 3 ุฃููุงุช ูููุดุฑ (Top 3)</h3>
      <ul class="list" id="topTimes"></ul>

      <h3 style="margin:14px 0 6px;font-size:16px">ุฃููุงุช ุฅุถุงููุฉ ููุงุฎุชุจุงุฑ + ุงูุชุฑุงุญุงุช ุฐููุฉ</h3>
      <ul class="list" id="extraTimes"></ul>

      <div class="divider"></div>

      <h3 style="margin:0 0 6px;font-size:16px">ุฎุทุฉ ุงุฎุชุจุงุฑ ุณุฑูุนุฉ (14 ููู)</h3>
      <ol class="list" style="margin-top:8px">
        <li>ุงุฎุชุฑ 3 ุฃููุงุช ูู ุงูุฃุนููุ ููุฒูุนูุง ุนูู ุฃุณุจูุนูู.</li>
        <li>ุซุจูุช ููุน ุงููุญุชูู ุฃุซูุงุก ุงูุงุฎุชุจุงุฑ (ูุซู Reels ููุท) ููุชุงุฆุฌ ุนุงุฏูุฉ.</li>
        <li>ูุงุฑู: ุงููุตูู/ุงูุชูุงุนู/ุงูุฑุณุงุฆู/ุงูููุฑุงุช (ููุฑูุงุจุท)ุ ุซู ุซุจูุช ุฃูุถู ููุชูู.</li>
      </ol>

      <div class="divider"></div>

      <div class="card" style="background:rgba(255,255,255,.02);border:1px solid var(--border);box-shadow:none">
        <h3 style="margin:0 0 6px;font-size:16px">ุฃุฏูุงุช ุฃุฎุฑู ูุฏ ุชููู</h3>
        <ul class="list" style="margin-top:8px">
          <li><a href="/tools/best-time-to-post-instagram/">ุฃูุถู ููุช ูููุดุฑ ุนูู ุฅูุณุชุบุฑุงู</a></li>
          <li><a href="/tools/instagram-engagement-calculator/">ุญุงุณุจุฉ ูุนุฏู ุงูุชูุงุนู ุนูู ุฅูุณุชุบุฑุงู</a></li>
          <li><a href="/tools/">ูู ุงูุฃุฏูุงุช ุงููุฌุงููุฉ</a></li>
        </ul>
      </div>

      <div class="divider"></div>

      <details>
        <summary>ููุงุญุธุงุช ูููุฉ</summary>
        <div style="margin-top:10px;color:var(--muted);line-height:1.9">
          <p><strong>Reels:</strong> ุบุงูุจูุง ูุนูู ุฃูุถู ูุณุงุกู ูุนุทูุฉ ููุงูุฉ ุงูุฃุณุจูุน.</p>
          <p><strong>Links (B2B):</strong> ุฌุฑูุจ 10:00โ12:00 ูุฃูุงู ุงูุนูู.</p>
          <p><strong>Groups:</strong> ุงุฎุชุจุฑ 20:00โ22:00 ูุฃู ุงูููุงุด ูุฒูุฏ ููููุง.</p>
        </div>
      </details>
    </div>
  </section>

  <!-- Insights guide -->
  <section class="card anchor" id="insightsGuide" style="margin-top:12px">
    <h2 style="margin:0 0 6px;font-size:18px">ุฃูู ุฃุฌุฏ โูุดุงุท ุงูุฌูููุฑโ ูู Meta Business Suiteุ</h2>
    <p class="note" style="margin:0 0 10px">
      ุงููุฏู: ุชุนุฑู โูุชู ูููู ุฌูููุฑู Onlineโ ุซู ุชูุงุฑููุง ูุน ุงูุชุฑุงุญุงุช ุงูุฃุฏุงุฉ.
    </p>
    <ol class="list" style="margin-top:8px">
      <li>ุงุฏุฎู ุฅูู <strong>Meta Business Suite</strong> (ุณุทุญ ุงูููุชุจ ุฃูุถู).</li>
      <li>ุงุฎุชุฑ ุงูุตูุญุฉ (Page) ูู ุงูุฃุนูู.</li>
      <li>ุงุฐูุจ ุฅูู <strong>Insights</strong> ุซู ุงุจุญุซ ุนู ูุณู ูุซู: <strong>Audience / Followers</strong> ุฃู โูุชู ูููู ูุชุงุจุนูู ูุชุตูููโ.</li>
      <li>ุณุฌูู ุฃูุถู ููููู + ุฃูุถู ุณุงุนุชููุ ุซู ุงุฎุชุจุฑูุง ููุฏุฉ 14 ููููุง.</li>
    </ol>
    <div class="noteBox" style="margin-top:10px">
      <strong>ูุตูุญุฉ:</strong> ููุฑูุงุจุท (Link) โ ุฑุงูุจ <strong>ุงูููุฑุงุช</strong>. ูู Reels/Video โ ุฑุงูุจ <strong>ูุดุงูุฏุงุช 3 ุซูุงูู</strong> + <strong>ุงูุชูุงุนู</strong>.
    </div>
  </section>

  <!-- Leads -->
  <div class="card" style="margin-top:12px">
    <h2 style="margin:0 0 6px;font-size:18px">ูู ุชุฑูุฏ ูุชุงุฆุฌ ุฃุณุฑุนุ</h2>
    <p class="note" style="margin:0">
      ุงุทูุจ ุชุญููููุง ูุฌุงูููุง ุณุฑูุนูุง ูุตูุญุชู (ููุงุญุธุฉ: ุนุงุฏุฉ ูุฑุฏ ุฎูุงู <strong>24โ48 ุณุงุนุฉ</strong>).
    </p>

    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
      <a class="btn primary" id="waBtn"
         href="#"
         target="_blank" rel="noopener">
        ุชูุงุตู ูุงุชุณุงุจ ุงูุขู
      </a>

      <a class="btn" id="contactBtn"
         href="https://vivamediacreative.com/contact.html"
         target="_blank" rel="noopener">
        ุชูุงุตู ุนุจุฑ ุงููููุน
      </a>

      <button class="btn secondary" type="button" id="copyLinkBtn">
        ูุณุฎ ุฑุงุจุท ุงูุฃุฏุงุฉ
      </button>
    </div>

    <div class="noteBox" id="waMissingNote" style="display:none;margin-top:10px">
      <strong>ุชูุจูู:</strong> ุฒุฑ ูุงุชุณุงุจ ุบูุฑ ูููุนู ูุฃู ุฑูู ูุงุชุณุงุจ ูู ูุชู ุถุจุทู ุจุนุฏ.
    </div>

    <div class="divider"></div>

    <h3 style="margin:0 0 6px;font-size:16px">ุงุทูุจ ุชูุฑูุฑ PDF ูุฌุงูู</h3>
    <p class="note" style="margin:0 0 10px">
      ุงุชุฑู ุจุฑูุฏู ูุฑุงุจุท ุตูุญุชู ูุณูุฑุณู ูู ููุฎุตูุง + ุชูุตูุงุช ุนูููุฉ.
    </p>

    <form id="leadForm" action="https://formspree.io/f/REPLACE_ID" method="POST">
      <div class="row">
        <div class="field">
          <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
          <input name="email" type="email" required placeholder="name@email.com">
        </div>
        <div class="field">
          <label>ุฑุงุจุท ุตูุญุฉ ููุณ ุจูู</label>
          <input name="facebook" type="url" required placeholder="https://facebook.com/yourpage">
        </div>
      </div>
      <div class="field">
        <label>ูุงุฐุง ุชุฑูุฏ ุชุญุณูููุ</label>
        <input name="goal" type="text" placeholder="ูุซุงู: ุฒูุงุฏุฉ ุงูุชูุงุนู / ุฒูุงุฏุฉ ุงููุจูุนุงุช / ุฎุทุฉ ูุญุชูู">
      </div>
      <button class="btn primary" type="submit" id="pdfSubmitBtn">ุฃุฑุณู ุงูุทูุจ</button>
      <p class="note">ูู ูุดุงุฑู ุจูุงูุงุชู ูุน ุฃู ุทุฑู.</p>
    </form>

    <div class="noteBox" id="leadFormHiddenNote" style="display:none;margin-top:10px">
      <strong>ุชูุจูู:</strong> ูููุฐุฌ ุทูุจ PDF ุบูุฑ ูููุนู ุงูุขู ูุฃู Formspree ID ูู ูุชู ุถุจุทู ุจุนุฏ.
    </div>
  </div>
</main>

<div class="toast" id="toast" role="status" aria-live="polite"></div>

<footer class="footer">
  <div class="container">
    <div>ยฉ 2025 MarketAPro โ Free Marketing Tools</div>
    <div style="margin-top:6px">By <a href="https://vivamediacreative.com/ar/" rel="noopener">Viva Media Creative</a></div>
  </div>
</footer>

<script>
  /* =========================
     CONFIG (ุญุชู ูุง ุชูุณู placeholders)
  ========================= */
  const CONFIG = {
    whatsappNumber: "491234567890", // โ ุบููุฑูุง ูุจู ุงููุดุฑ (ุจุฏูู +)
    whatsappText: "ูุฑุญุจูุง MarketAProุ ุฃุฑูุฏ ุชุญููููุง ูุฌุงูููุง ูุตูุญุชู ุนูู ููุณ ุจูู",
  };

  /* =========================
     UI Helpers + Tracking
  ========================= */
  function showToast(msg){
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.style.display = 'block';
    clearTimeout(window.__toastTimer);
    window.__toastTimer = setTimeout(()=>{ t.style.display='none'; }, 2200);
  }

  function track(eventName, params){
    const payload = Object.assign({ event: eventName }, params || {});
    window.dataLayer = window.dataLayer || [];
    window.dataLayer.push(payload);
    if (typeof window.gtag === "function") {
      try { window.gtag("event", eventName, params || {}); } catch(_) {}
    }
  }

  /* =========================
     Time Utilities
     - โ support all dashes (โ,-,โ) + spaces
     - โ DST-safe option using a reference date
  ========================= */
  function pad2(n){ return String(n).padStart(2,'0'); }

  function parseHHMM(s){
    const m = String(s).match(/(\d{1,2})\s*:\s*(\d{2})/);
    if(!m) return null;
    const hh = Math.max(0, Math.min(23, Number(m[1])));
    const mm = Math.max(0, Math.min(59, Number(m[2])));
    return { hh, mm };
  }

  function minutesOf(hh,mm){ return hh*60+mm; }

  function fmtMin(total){
    total = ((total % 1440) + 1440) % 1440;
    const hh = Math.floor(total/60);
    const mm = total%60;
    return pad2(hh)+":"+pad2(mm);
  }

  function shiftRange(rangeText, shiftMin){
    const txt = String(rangeText).trim();
    const parts = txt.split(/\s*(?:โ|-|โ)\s*/);
    if(parts.length !== 2) return rangeText;
    const a = parseHHMM(parts[0]);
    const b = parseHHMM(parts[1]);
    if(!a || !b) return rangeText;
    return fmtMin(minutesOf(a.hh,a.mm) + shiftMin) + "โ" + fmtMin(minutesOf(b.hh,b.mm) + shiftMin);
  }

  function shiftEntry(entry, shiftMin){
    const txt = String(entry);
    const re = /(\d{1,2}\s*:\s*\d{2})\s*(?:โ|-|โ)\s*(\d{1,2}\s*:\s*\d{2})/;
    const m = txt.match(re);
    if(!m) return txt;
    const original = m[0];
    const shifted = shiftRange(original, shiftMin);
    return txt.replace(original, shifted);
  }

  // Get tz offset minutes for IANA zone at a given reference date
  function tzOffsetMinutesAt(iana, refDate){
    try{
      const d = new Date(refDate);
      const parts = new Intl.DateTimeFormat('en-US', {
        timeZone: iana,
        hour12: false,
        year:'numeric', month:'2-digit', day:'2-digit',
        hour:'2-digit', minute:'2-digit', second:'2-digit'
      }).formatToParts(d);
      const get = (type) => parts.find(p=>p.type===type)?.value;
      const asUTC = Date.UTC(
        Number(get('year')),
        Number(get('month')) - 1,
        Number(get('day')),
        Number(get('hour')),
        Number(get('minute')),
        Number(get('second'))
      );
      return Math.round((asUTC - d.getTime()) / 60000);
    }catch(e){
      return 0;
    }
  }

  function planningRefDate(mode){
    // "today": now
    if(mode === "today") return new Date();
    // "thisweek": pick a stable point within the upcoming week (next Monday at 12:00 local)
    const d = new Date();
    const day = d.getDay(); // 0 Sun .. 6 Sat
    const daysUntilMonday = (8 - day) % 7 || 7;
    d.setDate(d.getDate() + daysUntilMonday);
    d.setHours(12,0,0,0);
    return d;
  }

  /* =========================
     Data Model
  ========================= */
  const regionTZ = {
    gulf: "Asia/Riyadh",
    egypt: "Africa/Cairo",
    levant: "Asia/Beirut",
    maghreb: "Africa/Casablanca",
    europe: "Europe/Berlin",
    global: "UTC"
  };

  const byRegion = {
    gulf:   { label:"ุงูุฎููุฌ", prime:["ุงูุซูุงุซุงุก 18:00โ21:00","ุงูุฎููุณ 09:00โ11:00","ุงูุณุจุช 11:00โ13:00"], extra:["ุงูุฅุซููู 19:00โ21:00","ุงูุฃุฑุจุนุงุก 10:00โ12:00","ุงูุฌูุนุฉ 16:00โ19:00"] },
    egypt:  { label:"ูุตุฑ",    prime:["ุงูุฃุญุฏ 19:00โ22:00","ุงูุซูุงุซุงุก 18:00โ21:00","ุงูุฎููุณ 10:00โ12:00"], extra:["ุงูุณุจุช 11:00โ13:00","ุงูุฃุฑุจุนุงุก 18:00โ20:00","ุงูุฌูุนุฉ 16:00โ19:00"] },
    levant: { label:"ุจูุงุฏ ุงูุดุงู", prime:["ุงูุซูุงุซุงุก 18:00โ21:00","ุงูุฃุฑุจุนุงุก 10:00โ12:00","ุงูุณุจุช 11:00โ13:00"], extra:["ุงูุฅุซููู 18:00โ20:00","ุงูุฎููุณ 09:00โ11:00","ุงูุฌูุนุฉ 16:00โ19:00"] },
    maghreb:{ label:"ุงููุบุฑุจ ุงูุนุฑุจู", prime:["ุงูุฃุฑุจุนุงุก 19:00โ21:00","ุงูุฎููุณ 10:00โ12:00","ุงูุณุจุช 12:00โ14:00"], extra:["ุงูุซูุงุซุงุก 18:00โ20:00","ุงูุฅุซููู 10:00โ12:00","ุงูุฃุญุฏ 18:00โ21:00"] },
    europe: { label:"ุฃูุฑูุจุง", prime:["ุงูุฅุซููู 18:00โ20:00","ุงูุฃุฑุจุนุงุก 12:00โ14:00","ุงูุณุจุช 10:00โ12:00"], extra:["ุงูุซูุงุซุงุก 18:00โ21:00","ุงูุฎููุณ 09:00โ11:00","ุงูุฃุญุฏ 19:00โ21:00"] },
    global: { label:"ุฌูููุฑ ูุฎุชูุท", prime:["ูููููุง 09:00โ11:00","ูููููุง 18:00โ21:00","ุงูุซูุงุซุงุก/ุงูุฎููุณ (ุชุฌุฑุจุฉ ุฃูููุง)"], extra:["ุงูุณุจุช 11:00โ13:00","ุงูุฃุฑุจุนุงุก 10:00โ12:00","ุงูุฌูุนุฉ 16:00โ19:00"] }
  };

  const LABELS = {
    goal: {
      engagement:"ุฒูุงุฏุฉ ุงูุชูุงุนู",
      reach:"ุฒูุงุฏุฉ ุงููุตูู",
      sales:"ูุจูุนุงุช/Leads",
      brand:"ูุนู ุจุงูุนูุงูุฉ"
    },
    format: {
      reels:"Reels",
      video:"Video",
      post:"Post",
      link:"Link",
      mixed:"ูุฎุชูุท"
    },
    type: {
      page:"ุตูุญุฉ (Page)",
      group:"ุฌุฑูุจ/ูุฌุชูุน (Group)",
      creator:"ุตุงูุน ูุญุชูู (Creator)",
      personal:"ุดุฎุตู"
    },
    audience: {
      b2b:"B2B (ูููู/ุดุฑูุงุช)",
      b2c:"B2C (ุฌูููุฑ ุนุงู)"
    },
    industry: {
      general:"ุนุงู",
      entertainment:"ุชุฑููู/ูููุฒ",
      education:"ุชุนูููู",
      ecommerce:"ุชุฌุงุฑุฉ ุฅููุชุฑูููุฉ",
      local:"ุฎุฏูุงุช ูุญููุฉ"
    },
    daysMode: {
      all:"ูู ุงูุฃูุงู",
      workdays:"ุฃูุงู ุงูุนูู (ุชูุฑูุจูุง)",
      weekend:"ุงูููููุฏ (ุชูุฑูุจูุง)"
    },
    planning: {
      today:"ุชูููุช ุงูููู (ุงูุขู)",
      thisweek:"ูุฐุง ุงูุฃุณุจูุน (ุชูููู ูุฎ DST)"
    }
  };

  function label(map, key){ return (map && map[key]) ? map[key] : key; }

  function goalHints(goal, format, audience){
    const hints = [];
    if(goal === "sales") hints.push("ูููุจูุนุงุช/ุงูุทูุจุงุช: ุฌุฑูุจ 10:00โ12:00 + 19:00โ21:00 ููุฑุฑ CTA ูุงุถุญ.");
    if(goal === "reach") hints.push("ูููุตูู: ูุฑูุฑ ููุณ ุงูุตูุบุฉ 3 ูุฑุงุช ุฃุณุจูุนููุง ูุงุฎุชุฑ ููุชูู ุซุงุจุชูู.");
    if(goal === "brand") hints.push("ูููุนู: ุญุงูุธ ุนูู ุงุชุณุงู ุงูุฑุณุงูุฉ + ุชูุฑุงุฑ ุฃุณุจูุนู ุจููุณ ุงูููุฑุฉ.");
    if(goal === "engagement") hints.push("ููุชูุงุนู: ุฃุถู ุณุคุงููุง/ุงุณุชูุชุงุก ูุฑูุฒ ุนูู ุงููุณุงุก ูุงูููููุฏ.");
    if(format === "reels") hints.push("Reels: ุบุงูุจูุง ุงูุฃูุถู ูุณุงุกู + ุนุทูุฉ ููุงูุฉ ุงูุฃุณุจูุน.");
    if(format === "video") hints.push("Video: ุฌุฑูุจ 18:00โ21:00 ูุฃู ุงููุดุงูุฏุฉ ุชุฒูุฏ ุจุนุฏ ุงูุนูู.");
    if(format === "link") {
      hints.push("Links: ุบุงูุจูุง ุชุนูู ุฃูุถู ุตุจุงุญูุง/ุธูุฑูุง (ุฎุตูุตูุง ููุฌูููุฑ ุงููููู).");
      if(audience === "b2b") hints.push("B2B: ุซุจูุช 10:00โ12:00 ูู ุฃูุงู ุงูุนูู ุฃูููุง.");
    }
    return hints;
  }

  function industryTweaks(industry){
    if(industry === "entertainment") return ["ุงูุณุจุช 21:00โ23:00 โ ููุงุณุจ ูููุญุชูู ุงูุชุฑูููู"];
    if(industry === "education") return ["ุงูุฃุฑุจุนุงุก 11:00โ13:00 โ ููุงุณุจ ูููุญุชูู ุงูุชุนูููู"];
    if(industry === "ecommerce") return ["ุงูุฎููุณ 19:00โ22:00 โ ููุงุณุจ ููุฑุงุฑุงุช ุงูุดุฑุงุก"];
    if(industry === "local") return ["ุงูุฃุญุฏ 12:00โ14:00 โ ููุงุณุจ ูุฎุฏูุงุช ูุญููุฉ/ุนุงุฆููุฉ"];
    return [];
  }

  /* =========================
     โ Professional logic:
     - Top 3 comes from region.prime only (with minimal tweaks)
     - Smart suggestions + type/format/audience go to Extra
  ========================= */
  function tweakPrime(primeArr, goal, format, audience, daysMode){
    // Keep the base prime, only reorder slightly for stronger intent (without injecting "generic" items)
    const arr = primeArr.slice();

    const preferMorning = (format === "link") || (audience === "b2b" && goal !== "engagement");
    const preferEvening = (format === "reels" || format === "video" || goal === "engagement");

    // simple scoring reorder based on whether the item contains a morning-ish or evening-ish range
    function hasRangeBetween(txt, startH, endH){
      const m = String(txt).match(/(\d{1,2})\s*:\s*(\d{2})/);
      if(!m) return false;
      const hh = Number(m[1]);
      return hh >= startH && hh <= endH;
    }

    arr.sort((a,b)=>{
      const aMorning = hasRangeBetween(a, 8, 12);
      const bMorning = hasRangeBetween(b, 8, 12);
      const aEvening = hasRangeBetween(a, 17, 22);
      const bEvening = hasRangeBetween(b, 17, 22);

      let sa = 0, sb = 0;
      if(preferMorning){ sa += aMorning?2:0; sb += bMorning?2:0; }
      if(preferEvening){ sa += aEvening?2:0; sb += bEvening?2:0; }
      // slight boost if matches requested day-mode
      sa += dayModeMatchBoost(a, daysMode);
      sb += dayModeMatchBoost(b, daysMode);
      return sb - sa;
    });

    return uniqueKeep(arr).slice(0, 3);
  }

  function smartSuggestions(type, format, goal, audience, industry){
    const add = [];

    // account-type
    if(type === "page") add.push("ุงูุฃุญุฏ 10:00โ12:00 โ ููุงุณุจ ูุตูุญุงุช ุงูุฃุนูุงู (ูุญุชูู ูุณุชูุฑ/ุฑูุงุจุท)");
    if(type === "group") add.push("ุงูุฎููุณ 20:00โ22:00 โ ููุช ููุชุงุฒ ููุดุงุท ุงูุฌุฑูุจุงุช (ููุงุด/ุฃุณุฆูุฉ)");
    if(type === "creator") add.push("ุงูุณุจุช 18:00โ21:00 โ ุฌูููุฑ ูุดุท ูููุญุชูู ูุงูุชุฑูุฏ");
    if(type === "personal") add.push("ุงูุฌูุนุฉ 19:00โ21:00 โ ููุช ุฌูุฏ ููุชูุงุนู ุงูุงุฌุชูุงุนู");

    // format-intent
    if(format === "reels") add.push("ูููููุง 19:00โ22:00 โ ููุงุณุจ ูู Reels (ูุณุงุกู)");
    if(format === "video") add.push("ุงูุซูุงุซุงุก 18:00โ21:00 โ Video ุจุนุฏ ุงูุนูู ููุชุงุฒ");
    if(format === "link")  add.push("ุงูุฅุซููู 10:00โ12:00 โ ุฑูุงุจุท (Link) ููุช ุงูุฏูุงู ุฃูุถู");
    if(format === "post")  add.push("ุงูุฃุฑุจุนุงุก 12:00โ14:00 โ ููุดูุฑุงุช ูุต/ุตูุฑุฉ ููุช ุงูุธููุฑุฉ ุฌูุฏ");

    // goal & audience
    if(goal === "sales") add.push("ุงูุฎููุณ 19:00โ21:00 โ ููุช ููู ููุทูุจุงุช/ุงูุฑุณุงุฆู + CTA");
    if(goal === "reach") add.push("ุงูุฃุฑุจุนุงุก 18:00โ20:00 โ ุฑูุน ุงููุตูู ูุน ุชูุฑุงุฑ ููุณ ุงูุตูุบุฉ");
    if(goal === "brand") add.push("ุงูุฃุญุฏ 12:00โ14:00 โ ูุนู ุจุงูุนูุงูุฉ (ูุญุชูู ุฎููู ููุชูุฑุฑ)");
    if(audience === "b2b") add.push("ุงูุซูุงุซุงุก 10:00โ12:00 โ B2B: ุชุฑููุฒ ุตุจุงุญู ุฃูุงู ุงูุนูู");

    // industry
    industryTweaks(industry).forEach(x => add.push(x));

    return uniqueKeep(add);
  }

  function uniqueKeep(arr){
    const out = [];
    for(const x of arr){
      if(!out.includes(x)) out.push(x);
    }
    return out;
  }

  /* =========================
     Days filter (approx)
     weekend: ุงูุฌูุนุฉ/ุงูุณุจุช/ุงูุฃุญุฏ
     workdays: ุงูุฅุซููู-ุงูุฎููุณ + (ุจุญุณุจ ุจูุฏู ูุฏ ูุฎุชูู)
  ========================= */
  const DAYS_WEEKEND = ["ุงูุฌูุนุฉ","ุงูุณุจุช","ุงูุฃุญุฏ"];
  const DAYS_WORK = ["ุงูุฅุซููู","ุงูุซูุงุซุงุก","ุงูุฃุฑุจุนุงุก","ุงูุฎููุณ"];

  function entryDay(entry){
    const txt = String(entry);
    const all = DAYS_WEEKEND.concat(DAYS_WORK);
    for(const d of all){
      if(txt.includes(d)) return d;
    }
    return null; // e.g. "ูููููุง ..."
  }

  function dayModeMatchBoost(entry, mode){
    if(mode === "all") return 0.2;
    const d = entryDay(entry);
    if(!d) return 0.1; // "ูููููุง" neutral
    if(mode === "weekend") return DAYS_WEEKEND.includes(d) ? 0.6 : 0;
    if(mode === "workdays") return DAYS_WORK.includes(d) ? 0.6 : 0;
    return 0;
  }

  function filterByDays(arr, mode){
    if(mode === "all") return arr;
    return arr.filter(x=>{
      const d = entryDay(x);
      if(!d) return true; // keep "ูููููุง" / generic
      if(mode === "weekend") return DAYS_WEEKEND.includes(d);
      if(mode === "workdays") return DAYS_WORK.includes(d);
      return true;
    });
  }

  /* =========================
     Timezone conversion
  ========================= */
  function computeShiftMinutes(country, tzMode, localTz, planningMode){
    const ref = planningRefDate(planningMode);
    if(tzMode === "audience") return { shift: 0, label: "ุชูููุช ุงูุฌูููุฑ (" + (regionTZ[country] || "โ") + ")", ref };

    const aTZ = regionTZ[country] || "UTC";
    const lTZ = (localTz || "Europe/Berlin").trim();

    const aOff = tzOffsetMinutesAt(aTZ, ref);
    const lOff = tzOffsetMinutesAt(lTZ, ref);

    const shift = (lOff - aOff);
    return { shift, label: "ุชูููุชู (" + lTZ + ")", ref };
  }

  function applyTimezone(arr, shiftMin, tzMode){
    if(tzMode === "audience" || shiftMin === 0) return arr;
    return arr.map(x => shiftEntry(x, shiftMin));
  }

  /* =========================
     Score (simple confidence layer)
  ========================= */
  function scoreText(level){
    return level >= 8 ? "ุนุงูู" : level >= 5 ? "ูุชูุณุท" : "ููุฎูุถ";
  }

  function computeScores(goal, format, audience, daysMode){
    let engage = 5, sales = 5, reach = 5;

    if(format === "reels" || format === "video"){ engage += 2; reach += 1; sales -= 1; }
    if(format === "link"){ sales += 2; engage -= 1; reach += 1; }
    if(format === "post"){ engage += 1; reach += 1; }

    if(goal === "engagement") engage += 3;
    if(goal === "sales") sales += 3;
    if(goal === "reach") reach += 3;
    if(goal === "brand"){ reach += 1; engage += 1; }

    if(audience === "b2b"){ sales += 1; engage -= 1; }
    if(daysMode === "weekend"){ engage += 1; sales -= 1; }
    if(daysMode === "workdays"){ sales += 1; }

    // clamp
    engage = Math.max(0, Math.min(10, engage));
    sales = Math.max(0, Math.min(10, sales));
    reach = Math.max(0, Math.min(10, reach));
    return { engage, sales, reach };
  }

  function renderScores(scores){
    const row = document.getElementById("scoreRow");
    row.innerHTML = "";
    const items = [
      { title:"ููุงุณุจ ููุชูุงุนู", v:scores.engage },
      { title:"ููุงุณุจ ูููุจูุนุงุช", v:scores.sales },
      { title:"ููุงุณุจ ูููุตูู", v:scores.reach },
    ];
    items.forEach(it=>{
      const el = document.createElement("div");
      el.className = "score";
      el.innerHTML = `${it.title}: ${scoreText(it.v)} <small>(${it.v}/10)</small>`;
      row.appendChild(el);
    });
  }

  /* =========================
     Render
  ========================= */
  function renderList(id, arr){
    const el = document.getElementById(id);
    el.innerHTML = '';
    arr.forEach(t=>{
      const li = document.createElement('li');
      li.textContent = t;
      el.appendChild(li);
    });
  }

  /* =========================
     Init: timezone autofill + WhatsApp config
  ========================= */
  (function initLocalTZ(){
    const input = document.getElementById("localTz");
    const opt = document.getElementById("tzLocalOpt");
    try{
      const deviceTZ = Intl.DateTimeFormat().resolvedOptions().timeZone;
      if(deviceTZ){
        input.value = deviceTZ; // โ always prefer device TZ to avoid confusing non-Germany users
        opt.textContent = `ุชูููุชู (${deviceTZ})`;
      }
    }catch(_){
      // fallback keeps Europe/Berlin
      opt.textContent = `ุชูููุชู (${input.value})`;
    }
  })();

  (function initWhatsApp(){
    const btn = document.getElementById("waBtn");
    const note = document.getElementById("waMissingNote");
    const n = String(CONFIG.whatsappNumber || "").trim();

    const isPlaceholder = (!n || n === "491234567890" || n.includes("123456"));
    if(isPlaceholder){
      btn.style.display = "none";
      note.style.display = "block";
      return;
    }
    const text = encodeURIComponent(CONFIG.whatsappText || "ูุฑุญุจูุงุ ุฃุฑูุฏ ุชุญููููุง ูุฌุงูููุง.");
    btn.href = `https://wa.me/${n}?text=${text}`;
  })();

  /* =========================
     Form logic
  ========================= */
  const form = document.getElementById('timeForm');
  const out = document.getElementById('output');

  form.addEventListener('submit', (e)=>{
    e.preventDefault();

    const country = document.getElementById('country').value;
    const goal = document.getElementById('goal').value;
    const type = document.getElementById('type').value;
    const format = document.getElementById('format').value;
    const audience = document.getElementById('audience').value;
    const industry = document.getElementById('industry').value;
    const daysMode = document.getElementById('daysMode').value;

    const planning = document.getElementById('planning').value;
    const tzMode = document.getElementById('tzMode').value;
    const localTz = document.getElementById('localTz').value;

    const region = byRegion[country];
    const hints = goalHints(goal, format, audience);

    // โ DST-aware shift
    const tz = computeShiftMinutes(country, tzMode, localTz, planning);
    document.getElementById('tzBadge').textContent = "ุงูุฃููุงุช ุงููุนุฑูุถุฉ ุจุชูููุช: " + tz.label;

    // โ Prime: from region.prime only (with minimal tweak)
    const primeBase = filterByDays(region.prime, daysMode);
    const top3 = tweakPrime(primeBase.length ? primeBase : region.prime, goal, format, audience, daysMode);

    // โ Extra: region.extra + smart suggestions (no mixing into Top 3)
    const extraBase = filterByDays(region.extra, daysMode);
    const smart = filterByDays(smartSuggestions(type, format, goal, audience, industry), daysMode);

    // merge extras and remove duplicates + remove any already in top3
    let extras = uniqueKeep(extraBase.concat(smart)).filter(x => !top3.includes(x));

    // Apply timezone conversion if needed
    const topTimes = applyTimezone(top3, tz.shift, tzMode);
    const extraTimes = applyTimezone(extras, tz.shift, tzMode);

    // Meta
    const meta = document.getElementById('meta');
    meta.textContent =
      `ุฌูููุฑ: ${region.label} โ ูุฏู: ${label(LABELS.goal, goal)} โ ููุน ุงูุญุณุงุจ: ${label(LABELS.type, type)} โ ููุน ุงููุญุชูู: ${label(LABELS.format, format)} โ ููุน ุงูุฌูููุฑ: ${label(LABELS.audience, audience)} โ ุงููุฌุงู: ${label(LABELS.industry, industry)} โ ุงูุฃูุงู: ${label(LABELS.daysMode, daysMode)}`
      + (hints[0] ? (" | ูุตูุญุฉ: " + hints[0]) : "");

    // DST note
    const dstNote = document.getElementById("dstNote");
    const ref = tz.ref;
    const refLabel = (planning === "thisweek")
      ? `ุชู ุญุณุงุจ ุงูุชุญููู ุจูุงุกู ุนูู ูุฐุง ุงูุฃุณุจูุน (ูุฑุฌุน: ${ref.toLocaleDateString('ar')} ${ref.toLocaleTimeString('ar',{hour:'2-digit',minute:'2-digit'})}).`
      : `ุชู ุญุณุงุจ ุงูุชุญููู ุจูุงุกู ุนูู ุชูููุช ุงูููู (ูุฏ ูุชุบูุฑ ูุฑู ุณุงุนุฉ ุนูุฏ ุชุบููุฑ ุงูุชูููุช ุงูุตููู/ุงูุดุชูู).`;
    dstNote.textContent = "โ๏ธ ููุงุญุธุฉ DST: " + refLabel;

    // Score
    renderScores(computeScores(goal, format, audience, daysMode));

    // Render
    renderList('topTimes', topTimes);
    renderList('extraTimes', extraTimes);

    out.style.display = 'block';
    history.replaceState(null,'','#results');
    showToast('ุชู ุฅูุดุงุก ุงูุชูุตูุงุช โ');

    track("tool_submit", { tool: "best_time_facebook", country, goal, type, format, audience, industry, daysMode, tzMode, planning });
  });

  document.getElementById('clearBtn').addEventListener('click', ()=>{
    document.getElementById('country').value = 'gulf';
    document.getElementById('goal').value = 'engagement';
    document.getElementById('type').value = 'page';
    document.getElementById('format').value = 'reels';
    document.getElementById('audience').value = 'b2c';
    document.getElementById('industry').value = 'general';
    document.getElementById('daysMode').value = 'all';
    document.getElementById('planning').value = 'today';
    document.getElementById('tzMode').value = 'audience';
    document.getElementById('hint').textContent = '';
    out.style.display = 'none';
    history.replaceState(null,'',' ');
    showToast('ุชู ุงููุณุญ');

    track("tool_clear", { tool: "best_time_facebook" });
  });

  document.getElementById('copyBtn').addEventListener('click', async ()=>{
    if(out.style.display === 'none'){
      showToast('ุงุญุณุจ ุฃูููุง ููุณุฎ ุงูููุฎุต');
      return;
    }
    const countryTxt = document.getElementById('country').options[document.getElementById('country').selectedIndex].text;
    const goal = document.getElementById('goal').value;
    const type = document.getElementById('type').value;
    const format = document.getElementById('format').value;
    const audience = document.getElementById('audience').value;
    const industry = document.getElementById('industry').value;
    const daysMode = document.getElementById('daysMode').value;
    const planning = document.getElementById('planning').value;

    const tzBadge = document.getElementById('tzBadge').textContent.replace("ุงูุฃููุงุช ุงููุนุฑูุถุฉ ุจุชูููุช:","").trim();
    const top = [...document.querySelectorAll('#topTimes li')].map(li=>"- " + li.textContent).join("\n");
    const extra = [...document.querySelectorAll('#extraTimes li')].map(li=>"- " + li.textContent).join("\n");

    const txt =
`MarketAPro โ ุฃูุถู ููุช ูููุดุฑ ุนูู ููุณ ุจูู
ุงูุจูุฏ/ุงูููุทูุฉ: ${countryTxt}
ุงููุฏู: ${label(LABELS.goal, goal)}
ููุน ุงูุญุณุงุจ: ${label(LABELS.type, type)}
ููุน ุงููุญุชูู: ${label(LABELS.format, format)}
ููุน ุงูุฌูููุฑ: ${label(LABELS.audience, audience)}
ุงููุฌุงู: ${label(LABELS.industry, industry)}
ุงูุฃูุงู: ${label(LABELS.daysMode, daysMode)}
ุงูุชุญููู: ${label(LABELS.planning, planning)}
ุงูุชูููุช: ${tzBadge}

ุฃูุถู 3 ุฃููุงุช:
${top}

ุฃููุงุช ุฅุถุงููุฉ + ุงูุชุฑุงุญุงุช:
${extra}

ุงูุฑุงุจุท: https://marketapro.com/tools/best-time-to-post-facebook/`;

    try{
      await navigator.clipboard.writeText(txt);
      showToast('ุชู ูุณุฎ ุงูููุฎุต โ');
      track("copy_summary", { tool: "best_time_facebook" });
    }catch(e){
      alert('ุชุนุฐุฑ ุงููุณุฎ ุชููุงุฆููุง. ุงูุณุฎ ุงููุต ูุฏูููุง:\n\n' + txt);
    }
  });

  document.getElementById('shareBtn').addEventListener('click', async ()=>{
    if(out.style.display === 'none'){
      showToast('ุงุญุณุจ ุฃูููุง ุซู ุดุงุฑู');
      return;
    }
    const url = location.href.split('#')[0] + "#results";
    const title = "ุฃูุถู ููุช ูููุดุฑ ุนูู ููุณ ุจูู โ MarketAPro";
    const text = "ุฌุฑูุจ ุงูุฃุฏุงุฉ: ุชุญููู ุชูููุช + DST + ุงูุชุฑุงุญ ุฃูุถู ุงูุฃููุงุช ุญุณุจ ุจูุฏ ุงูุฌูููุฑ ูููุน ุงููุญุชูู.";

    if (navigator.share) {
      try {
        await navigator.share({ title, text, url });
        track("share", { tool: "best_time_facebook", method: "web_share" });
      } catch (_) {}
    } else {
      try{
        await navigator.clipboard.writeText(url);
        showToast('ุชู ูุณุฎ ุฑุงุจุท ุงููุชุงุฆุฌ ูููุดุงุฑูุฉ โ');
        track("share", { tool: "best_time_facebook", method: "copy_link" });
      } catch(_) {}
    }
  });

  document.getElementById('copyLinkBtn').addEventListener('click', async ()=>{
    try{
      await navigator.clipboard.writeText(location.href);
      showToast('ุชู ูุณุฎ ุฑุงุจุท ุงูุฃุฏุงุฉ โ');
      track("copy_link", { tool: "best_time_facebook" });
    }catch(e){
      alert('ุชุนุฐุฑ ุงููุณุฎ ุชููุงุฆููุง.');
    }
  });

  // Insights button: scroll + highlight
  document.getElementById('insightsBtn').addEventListener('click', ()=>{
    document.getElementById('insightsGuide').scrollIntoView({ behavior: "smooth", block: "start" });
    showToast("ุงูุฒู ูุชุนูููุงุช Insights ๐");
    track("insights_guide_open", { tool: "best_time_facebook" });
  });

  // Track CTA clicks
  const waBtn = document.getElementById('waBtn');
  if(waBtn){
    waBtn.addEventListener('click', ()=> track("whatsapp_click", { tool: "best_time_facebook" }));
  }
  document.getElementById('contactBtn').addEventListener('click', ()=> track("contact_click", { tool: "best_time_facebook" }));

  // Hide lead form if not configured
  (function(){
    const f = document.getElementById('leadForm');
    const action = (f.getAttribute('action') || "");
    const isReplace = action.includes("REPLACE_ID");
    if(isReplace){
      f.style.display = "none";
      document.getElementById('leadFormHiddenNote').style.display = "block";
    } else {
      f.addEventListener("submit", ()=> track("pdf_submit", { tool: "best_time_facebook" }));
    }
  })();
</script>
</body>
</html>
