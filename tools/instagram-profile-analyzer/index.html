<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ØªØ­Ù„ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø¥Ù†Ø³ØªØºØ±Ø§Ù… Ù…Ø¬Ø§Ù†Ù‹Ø§ â€” MarketAPro</title>
  <meta name="description" content="Ø­Ù„Ù‘Ù„ Ø­Ø³Ø§Ø¨ Ø¥Ù†Ø³ØªØºØ±Ø§Ù… Ø®Ù„Ø§Ù„ Ø«ÙˆØ§Ù†Ù: Score (0â€“100)ØŒ Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªÙØ§Ø¹Ù„ØŒ Ù…Ù‚Ø§Ø±Ù†Ø© Ù…Ø¹ÙŠØ§Ø±ÙŠØ© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨ØŒ ÙˆØªÙˆØµÙŠØ§Øª Ø¹Ù…Ù„ÙŠØ© + Ø±ÙˆØ§Ø¨Ø· Ø£Ø¯ÙˆØ§Øª Ù…Ø¬Ø§Ù†ÙŠØ©." />
  <link rel="canonical" href="https://marketapro.com/tools/instagram-profile-analyzer/" />
  <link rel="stylesheet" href="/style.css" />

  <style>
    /* âœ… Ø³ØªØ§ÙŠÙ„ Ø¨Ø³ÙŠØ· Ù„Ø¶Ù…Ø§Ù† Ø¹Ù…Ù„ Ø§Ù„ØµÙØ­Ø© Ø­ØªÙ‰ Ù„Ùˆ style.css Ø¹Ù†Ø¯Ùƒ Ù…Ø®ØªÙ„Ù */
    .grid2{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px}
    @media(max-width:900px){.grid2{grid-template-columns:1fr}}
    .mini{padding:14px;border-radius:16px;border:1px solid var(--border,rgba(255,255,255,.12));background:rgba(255,255,255,.02)}
    .mini label{display:block;color:var(--muted,#a6b3cc);font-weight:900;margin-bottom:6px;font-size:13px}
    .mini input,.mini select{
      width:100%;padding:12px 12px;border-radius:14px;border:1px solid var(--border,rgba(255,255,255,.12));
      background:rgba(255,255,255,.02);color:var(--text,#e8f0ff);outline:none
    }
    .note2{color:var(--muted,#a6b3cc);font-size:13px;margin:8px 0 0;line-height:1.8}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-top:12px}
    .pill{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border-radius:999px;border:1px solid var(--border,rgba(255,255,255,.12));background:rgba(255,255,255,.02);font-weight:900;font-size:12px;color:var(--muted,#a6b3cc)}
    .loader{
      display:none;align-items:center;gap:10px;margin-top:12px;
      padding:12px;border-radius:16px;border:1px solid var(--border,rgba(255,255,255,.12));background:rgba(255,255,255,.02)
    }
    .dot{width:8px;height:8px;border-radius:99px;background:rgba(56,189,248,.9);animation:b .9s infinite alternate}
    .dot:nth-child(2){animation-delay:.15s}
    .dot:nth-child(3){animation-delay:.3s}
    @keyframes b{from{opacity:.3;transform:translateY(0)}to{opacity:1;transform:translateY(-4px)}}

    .barWrap{margin-top:10px}
    input[type="range"]{width:100%}
    .rangeMeta{display:flex;justify-content:space-between;color:var(--muted,#a6b3cc);font-size:12px;margin-top:6px}

    .report{display:none;margin-top:12px}
    .scoreBox{padding:14px;border-radius:16px;border:1px solid var(--border,rgba(255,255,255,.12));background:rgba(255,255,255,.02)}
    .scoreTop{display:flex;justify-content:space-between;align-items:center;gap:10px}
    .scoreNum{font-weight:1000;font-size:34px;line-height:1}
    .scoreLabel{color:var(--muted,#a6b3cc);font-weight:900}
    .meter{height:10px;border-radius:999px;background:rgba(255,255,255,.06);overflow:hidden;margin-top:10px;border:1px solid rgba(255,255,255,.08)}
    .meter > div{height:100%;width:0%}
    .kpis{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:12px}
    @media(max-width:980px){.kpis{grid-template-columns:1fr}}
    .kpi{padding:14px;border-radius:16px;border:1px solid var(--border,rgba(255,255,255,.12));background:rgba(255,255,255,.02)}
    .kpi strong{display:block;font-size:18px}
    .kpi span{color:var(--muted,#a6b3cc);font-size:13px}
    .cards2{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px}
    @media(max-width:980px){.cards2{grid-template-columns:1fr}}
    .list{margin:8px 0 0;padding-right:18px;color:var(--muted,#a6b3cc);line-height:1.9}
    .toast{
      position:fixed;inset-inline-start:16px;bottom:16px;
      background:rgba(0,0,0,.65);border:1px solid rgba(255,255,255,.12);
      padding:10px 12px;border-radius:14px;color:#fff;
      display:none;z-index:9999
    }
    /* Ø£Ø²Ø±Ø§Ø± Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© */
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 14px;border-radius:14px;font-weight:900;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.03);color:#fff;cursor:pointer}
    .btn.primary{border:0;background:linear-gradient(135deg,#06b6d4,#38bdf8);color:#00131a}
    .btn.secondary{background:transparent}
  </style>
</head>

<body>
<header class="header">
  <div class="container header-inner">
    <a class="brand" href="/" aria-label="Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©">
      <div class="brand-badge" aria-hidden="true"></div>
      <div>
        <p class="brand-title">MarketAPro</p>
        <p class="brand-sub">ØªØ­Ù„ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø¥Ù†Ø³ØªØºØ±Ø§Ù…</p>
      </div>
    </a>

    <nav class="nav" aria-label="Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©">
      <a href="/">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
      <a class="active" href="/tools/">Ø§Ù„Ø£Ø¯ÙˆØ§Øª</a>
      <a href="/news/">Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª</a>
    </nav>
  </div>
</header>

<main class="container section">
  <div class="card">
    <h1 style="margin:0 0 8px;font-size:28px;line-height:1.4">ØªØ­Ù„ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø¥Ù†Ø³ØªØºØ±Ø§Ù… Ù…Ø¬Ø§Ù†Ù‹Ø§</h1>
    <p class="note">Ø£Ø¯Ø®Ù„ Ø§Ù„ÙŠÙˆØ²Ø± ÙˆØ§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨. Ø³Ù†Ø¨Ù†ÙŠ ØªÙ‚Ø±ÙŠØ±Ù‹Ø§ Ø³Ø±ÙŠØ¹Ù‹Ø§ + Score + ØªÙˆØµÙŠØ§Øª.</p>

    <form id="form" class="grid2">
      <div class="mini">
        <label for="username">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
        <input id="username" type="text" placeholder="@username" autocomplete="off" required />
        <p class="note2">Ù…Ø«Ø§Ù„: <strong>@marketapro</strong></p>
      </div>

      <div class="mini">
        <label for="acctType">Ù†ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨</label>
        <select id="acctType" required>
          <option value="model">Ù…ÙˆØ¯ÙŠÙ„ / ÙØ§Ø´Ù† / ØªØµÙˆÙŠØ±</option>
          <option value="creator">ØµØ§Ù†Ø¹ Ù…Ø­ØªÙˆÙ‰ / Ù…Ø¤Ø«Ø±</option>
          <option value="business">Ù…ØªØ¬Ø± / Ø¨Ø²Ù†Ø³</option>
        </select>
        <p class="note2">Ù‡Ø°Ø§ ÙŠØºÙŠÙ‘Ø± Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© ÙˆØ§Ù„ØªÙˆØµÙŠØ§Øª.</p>
      </div>

      <div class="mini" style="grid-column:1/-1">
        <div class="row" style="margin-top:0">
          <button class="btn primary" type="submit">ğŸ” ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨</button>
          <button class="btn secondary" id="resetBtn" type="button">Ù…Ø³Ø­</button>
          <span class="pill">Ø¨Ø¯ÙˆÙ† ØªØ³Ø¬ÙŠÙ„</span>
          <span class="pill">Hybrid</span>
          <span class="pill">Score</span>
        </div>

        <div class="loader" id="loader" aria-live="polite">
          <div style="display:flex;gap:6px">
            <span class="dot"></span><span class="dot"></span><span class="dot"></span>
          </div>
          <div style="color:var(--muted,#a6b3cc);font-weight:900">Ø¬Ø§Ø±Ù ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨â€¦</div>
        </div>
      </div>

      <!-- Confirm -->
      <div class="mini" id="confirmBox" style="grid-column:1/-1;display:none">
        <strong style="display:block;margin-bottom:8px">âœ… ØªØ£ÙƒÙŠØ¯ Ø³Ø±ÙŠØ¹ Ù„Ù„Ø£Ø±Ù‚Ø§Ù…</strong>
        <p class="note2" style="margin-top:0">Ø£ÙƒØ¯ Ù‚ÙŠÙ…Ù‹Ø§ ØªÙ‚Ø±ÙŠØ¨ÙŠØ© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙ‚Ø±ÙŠØ± Ø£Ø¯Ù‚.</p>

        <div class="grid2">
          <div>
            <label for="followers">Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ†</label>
            <input id="followers" type="number" min="1" placeholder="Ù…Ø«Ø§Ù„: 12500" />
          </div>

          <div>
            <label for="goal">Ù‡Ø¯ÙÙƒ</label>
            <select id="goal">
              <option value="engagement">Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ØªÙØ§Ø¹Ù„</option>
              <option value="followers">Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ†</option>
              <option value="sales">Ù…Ø¨ÙŠØ¹Ø§Øª / ØªØ¹Ø§ÙˆÙ†Ø§Øª</option>
            </select>
          </div>

          <div class="mini" style="grid-column:1/-1">
            <label>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨Ø§Øª (Ùª Ù…Ù† Ø§Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ†)</label>
            <div class="barWrap">
              <input id="likesPct" type="range" min="0.1" max="10" step="0.1" value="2.5" />
              <div class="rangeMeta">
                <span>0.1%</span><span id="likesPctLabel">2.5%</span><span>10%</span>
              </div>
            </div>
          </div>

          <div class="mini" style="grid-column:1/-1">
            <label>Ù…ØªÙˆØ³Ø· Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª (Ùª Ù…Ù† Ø§Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ†)</label>
            <div class="barWrap">
              <input id="commentsPct" type="range" min="0.01" max="2" step="0.01" value="0.15" />
              <div class="rangeMeta">
                <span>0.01%</span><span id="commentsPctLabel">0.15%</span><span>2%</span>
              </div>
            </div>
          </div>

          <div class="mini" style="grid-column:1/-1">
            <div class="row" style="margin-top:0">
              <button class="btn primary" id="buildReportBtn" type="button">âœ… Ø§Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
              <button class="btn secondary" id="copyReportBtn" type="button">Ù†Ø³Ø® Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>

  <!-- Report -->
  <div class="card report" id="report">
    <div class="scoreBox">
      <div class="scoreTop">
        <div>
          <div id="title" style="font-weight:1000;font-size:18px">ØªØ­Ù„ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø¥Ù†Ø³ØªØºØ±Ø§Ù…</div>
          <div id="subtitle" class="note2">â€”</div>
        </div>
        <div style="text-align:left">
          <div class="scoreNum" id="scoreNum">0</div>
          <div class="scoreLabel" id="scoreLabel">â€”</div>
        </div>
      </div>
      <div class="meter"><div id="meterFill"></div></div>
      <p class="note2" id="benchmark" style="margin-top:10px"></p>
    </div>

    <div class="kpis">
      <div class="kpi"><strong id="followersText">0</strong><span>Ø§Ù„Ù…ØªØ§Ø¨Ø¹ÙˆÙ†</span></div>
      <div class="kpi"><strong id="likeRateText">0%</strong><span>Like Rate</span></div>
      <div class="kpi"><strong id="commentRateText">0%</strong><span>Comment Rate</span></div>
    </div>

    <div class="cards2">
      <div class="mini">
        <strong>ØªØ´Ø®ÙŠØµ</strong>
        <p id="diagnosis" class="note2" style="margin-top:8px"></p>
        <ul id="weakPoints" class="list"></ul>
      </div>
      <div class="mini">
        <strong>ØªÙˆØµÙŠØ§Øª</strong>
        <ol id="recs" class="list"></ol>
      </div>
    </div>

    <div class="mini" style="margin-top:12px">
      <strong>Ø®Ø·Ø© Ø§Ø®ØªØ¨Ø§Ø± 14 ÙŠÙˆÙ…</strong>
      <p class="note2" id="testPlan" style="margin-top:8px"></p>
    </div>

    <div class="mini" style="margin-top:12px">
      <strong>Ø±ÙˆØ§Ø¨Ø· Ø£Ø¯ÙˆØ§Øª Ø£Ø®Ø±Ù‰</strong>
      <ul class="list">
        <li><a href="/tools/best-time-to-post-instagram/">Ø£ÙØ¶Ù„ ÙˆÙ‚Øª Ù„Ù„Ù†Ø´Ø±</a></li>
        <li><a href="/tools/instagram-engagement-calculator/">Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªÙØ§Ø¹Ù„</a></li>
      </ul>
    </div>
  </div>

</main>

<footer class="footer">
  <div class="container">Â© 2025 MarketAPro</div>
</footer>

<div class="toast" id="toast">ØªÙ… âœ…</div>

<script>
  const $ = (id)=>document.getElementById(id);

  function toast(msg){
    const t = $('toast');
    t.textContent = msg;
    t.style.display = 'block';
    clearTimeout(window.__t);
    window.__t = setTimeout(()=>t.style.display='none', 1400);
  }

  function sanitizeUsername(v){
    v = (v||"").trim().replace(/\s+/g,'');
    if(!v) return "";
    if(v.startsWith("https://")) v = v.split("/").filter(Boolean).pop() || v;
    if(v.startsWith("@")) v = v.slice(1);
    v = v.replace(/[^a-zA-Z0-9._]/g,'');
    return v.toLowerCase();
  }

  function clamp(n,min,max){ return Math.max(min, Math.min(max,n)); }

  function labelScore(score){
    if(score >= 80) return "Ù…Ù…ØªØ§Ø²";
    if(score >= 65) return "Ù‚ÙˆÙŠ";
    if(score >= 50) return "Ù…ØªÙˆØ³Ø·";
    return "Ø¶Ø¹ÙŠÙ";
  }

  function scoreColor(score){
    if(score >= 75) return "linear-gradient(135deg, rgba(34,197,94,.95), rgba(56,189,248,.65))";
    if(score >= 55) return "linear-gradient(135deg, rgba(250,204,21,.95), rgba(56,189,248,.45))";
    return "linear-gradient(135deg, rgba(239,68,68,.95), rgba(56,189,248,.35))";
  }

  function benchmarks(type){
    if(type === "model") return {min:2.5, max:4.5, note:"Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙØ§Ø¹Ù„ Ù„Ù„Ù…ÙˆØ¯ÙŠÙ„Ø² ØºØ§Ù„Ø¨Ù‹Ø§ Ø¨ÙŠÙ† 2.5% Ùˆ 4.5%."};
    if(type === "creator") return {min:1.8, max:3.8, note:"Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙØ§Ø¹Ù„ Ù„ØµÙ†Ø§Ø¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ØºØ§Ù„Ø¨Ù‹Ø§ Ø¨ÙŠÙ† 1.8% Ùˆ 3.8%."};
    return {min:1.2, max:3.0, note:"Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙØ§Ø¹Ù„ Ù„Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ© ØºØ§Ù„Ø¨Ù‹Ø§ Ø¨ÙŠÙ† 1.2% Ùˆ 3.0%."};
  }

  function buildDiagnosis({type, goal, er, likeRate, commentRate}){
    const weak = [];
    let txt = "";

    if(commentRate < 0.08) weak.push("Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù…Ù†Ø®ÙØ¶Ø©: Ø§Ø³ØªØ®Ø¯Ù… CTA Ø³Ø¤Ø§Ù„ Ù…Ø¨Ø§Ø´Ø± Ø£Ùˆ Ø§Ø®ØªÙŠØ§Ø± A/B.");
    if(likeRate < 1.0) weak.push("Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨Ø§Øª Ù…Ù†Ø®ÙØ¶Ø©: Ø¬Ø±Ù‘Ø¨ Carousel Ù‚ÙŠÙ…ØªÙ‡ Ø¹Ø§Ù„ÙŠØ© + Hook Ù‚ÙˆÙŠ.");

    if(er < 1){
      txt = "Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ù†Ø®ÙØ¶ Ø­Ø§Ù„ÙŠÙ‹Ø§. ØºØ§Ù„Ø¨Ù‹Ø§ Ø§Ù„Ø³Ø¨Ø¨: Ù…Ø­ØªÙˆÙ‰ Ø¹Ø§Ù… + Ø¶Ø¹Ù Hook/CTA + Ø¹Ø¯Ù… Ø«Ø¨Ø§Øª.";
      weak.push("Ø«Ø¨Ù‘Øª 2 Ù†ÙˆØ¹ Ù…Ø­ØªÙˆÙ‰ Ù„Ù…Ø¯Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠÙ† Ø«Ù… Ù‚Ø§Ø±Ù†.");
    }else if(er < 2.5){
      txt = "Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…ØªÙˆØ³Ø·. Ù„Ø¯ÙŠÙƒ Ø£Ø³Ø§Ø³ Ø¬ÙŠØ¯ Ù„ÙƒÙ† ØªØ­ØªØ§Ø¬ ØªØ­Ø³ÙŠÙ† ÙÙŠ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙˆCTA.";
      weak.push("Ø§Ø¬Ø¹Ù„ 60% Ù…Ù† Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Carousel Ø£Ùˆ Reels Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø­ÙØ¸/Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©.");
    }else{
      txt = "Ø§Ù„ØªÙØ§Ø¹Ù„ Ø¬ÙŠØ¯/Ù‚ÙˆÙŠ. Ø±ÙƒÙ‘Ø² Ø¹Ù„Ù‰ ØªØ«Ø¨ÙŠØª Ø§Ù„Ø£ÙØ¶Ù„ ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù„Ø§ÙƒØªØ³Ø§Ø¨ ÙˆØµÙˆÙ„ Ø£ÙƒØ¨Ø±.";
      weak.push("Ø§Ø®ØªØ¨Ø± ØªÙˆÙ‚ÙŠØªÙŠÙ† ÙÙ‚Ø· Ù„Ù…Ø¯Ø© 14 ÙŠÙˆÙ… ÙˆØ«Ø¨Ù‘Øª Ø§Ù„Ø£ÙØ¶Ù„.");
    }

    if(type === "model") weak.push("Ù„Ù„Ù…ÙˆØ¯ÙŠÙ„Ø²: Pose tutorial + BTS + Before/After Ù„Ø±ÙØ¹ Ø§Ù„Ø·Ù„Ø¨.");
    if(type === "business") weak.push("Ù„Ù„Ù…ØªØ§Ø¬Ø±: UGC/Reviews + FAQ Stories + Ø¹Ø±Ø¶ ÙˆØ§Ø¶Ø­.");
    if(type === "creator") weak.push("Ù„Ù„Ù…Ø¤Ø«Ø±ÙŠÙ†: Ø³Ù„Ø§Ø³Ù„ Part 1/2/3 + CTA Ù…ØªØ§Ø¨Ø¹Ø©.");

    if(goal === "sales") weak.push("Ù„Ù„Ø¨ÙŠØ¹/Ø§Ù„ØªØ¹Ø§ÙˆÙ†: Ø¥Ø«Ø¨Ø§Øª Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ + Ø¹Ø±Ø¶ + CTA DM/ÙˆØ§ØªØ³Ø§Ø¨.");
    if(goal === "followers") weak.push("Ù„Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ†: Reels Ù‚ØµÙŠØ±Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ© + Carousel Ø­ÙØ¸.");

    return {txt, weak: weak.slice(0,5)};
  }

  function buildRecs({type, goal, commentRate}){
    const recs = [];
    recs.push("Ø§Ø®ØªØ¨Ø± 2 ØªÙˆÙ‚ÙŠØª Ù†Ø´Ø± Ù„Ù…Ø¯Ø© 14 ÙŠÙˆÙ… ÙˆØ³Ø¬Ù‘Ù„ Ø§Ù„Ø£ÙØ¶Ù„ Ø­Ø³Ø¨ Saves/Comments.");
    recs.push("CTA ÙˆØ§Ø­Ø¯ ÙˆØ§Ø¶Ø­ Ù„ÙƒÙ„ Ù…Ù†Ø´ÙˆØ± (Ø³Ø¤Ø§Ù„/Ø§Ø®ØªÙŠØ§Ø±/Ø·Ù„Ø¨ Ø±Ø£ÙŠ).");
    if(commentRate < 0.08) recs.push("Ø§Ø±ÙØ¹ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª: Ø§Ø³ØªØ®Ø¯Ù… â€˜Ø§Ø®ØªÙØ± A/Bâ€™ Ø¨Ø¯Ù„ CTA Ø¹Ø§Ù….");
    if(type === "model") recs.push("Ø§Ù†Ø´Ø± 3 Ø±ÙŠÙ„Ø² Ø£Ø³Ø¨ÙˆØ¹ÙŠÙ‹Ø§: Pose + BTS + Before/After.");
    if(type === "business") recs.push("2 Carousel Ø£Ø³Ø¨ÙˆØ¹ÙŠÙ‹Ø§ (Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© + Ø¯Ù„ÙŠÙ„ Ø´Ø±Ø§Ø¡) + Story FAQ ÙŠÙˆÙ…ÙŠØ©.");
    if(type === "creator") recs.push("Ø³Ù„Ø³Ù„Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ© Ø«Ø§Ø¨ØªØ© (ÙŠÙˆÙ… Ù…Ø­Ø¯Ø¯) Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹ÙˆØ¯Ø© ÙˆØ§Ù„Ù…ØªØ§Ø¨Ø¹Ø©.");
    if(goal === "sales") recs.push("Ù…Ù†Ø´ÙˆØ± Ø¨ÙŠØ¹ Ø£Ø³Ø¨ÙˆØ¹ÙŠÙ‹Ø§: (Ù…Ø´ÙƒÙ„Ø©â†’Ø­Ù„â†’Ù†ØªÙŠØ¬Ø©â†’Ø¥Ø«Ø¨Ø§Øªâ†’CTA).");
    return recs.slice(0,5);
  }

  function buildPlan(){
    return "Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 1: 2 Reels + 2 Carousel Ø¨ØªÙˆÙ‚ÙŠØªÙŠÙ† Ø«Ø§Ø¨ØªÙŠÙ†. Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 2: ÙƒØ±Ø± Ø§Ù„Ø£ÙØ¶Ù„ + ØºÙŠÙ‘Ø± CTA (Ø³Ø¤Ø§Ù„ vs A/B). Ø«Ù… Ø«Ø¨Ù‘Øª Ø£ÙØ¶Ù„ (Ù†ÙˆØ¹ Ù…Ø­ØªÙˆÙ‰ + ØªÙˆÙ‚ÙŠØª + CTA) Ù„Ù…Ø¯Ø© 30 ÙŠÙˆÙ….";
  }

  function calcReport({followers, likeRate, commentRate, type, goal, username}){
    const er = likeRate + commentRate;
    const b = benchmarks(type);
    const norm = clamp((er - b.min) / (b.max - b.min), 0, 1);
    let score = Math.round(35 + norm * 60);
    if(commentRate >= 0.12) score += 3;
    if(commentRate < 0.05) score -= 6;
    score = clamp(score, 0, 100);

    const diag = buildDiagnosis({type, goal, er, likeRate, commentRate});
    const recs = buildRecs({type, goal, commentRate});
    const plan = buildPlan();

    return {username, followers, likeRate, commentRate, er, score, b, diag, recs, plan};
  }

  function setMeter(score){
    const fill = $('meterFill');
    fill.style.width = score + "%";
    fill.style.background = scoreColor(score);
  }

  async function copyText(txt){
    try{
      await navigator.clipboard.writeText(txt);
      toast("ØªÙ… Ø§Ù„Ù†Ø³Ø® âœ…");
    }catch(e){
      alert("ØªØ¹Ø°Ø± Ø§Ù„Ù†Ø³Ø® ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§. Ø§Ù†Ø³Ø® ÙŠØ¯ÙˆÙŠÙ‹Ø§:\n\n" + txt);
    }
  }

  // DOM
  const form = $('form');
  const loader = $('loader');
  const confirmBox = $('confirmBox');
  const report = $('report');

  $('likesPct').addEventListener('input', ()=> $('likesPctLabel').textContent = $('likesPct').value + "%");
  $('commentsPct').addEventListener('input', ()=> $('commentsPctLabel').textContent = $('commentsPct').value + "%");

  form.addEventListener('submit', (e)=>{
    e.preventDefault();
    const u = sanitizeUsername($('username').value);
    if(!u){ toast("Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù… ØµØ­ÙŠØ­"); return; }

    loader.style.display = "flex";
    confirmBox.style.display = "none";
    report.style.display = "none";

    setTimeout(()=>{
      loader.style.display = "none";
      confirmBox.style.display = "block";
      $('followers').value = "";
      $('likesPct').value = "2.5"; $('likesPctLabel').textContent = "2.5%";
      $('commentsPct').value = "0.15"; $('commentsPctLabel').textContent = "0.15%";
      toast("ØªÙ… ØªØ¬Ù‡ÙŠØ² Ø§Ù„ØªØ­Ù„ÙŠÙ„ â€” Ø£ÙƒØ¯ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… âœ…");
      window.scrollTo({top: confirmBox.offsetTop - 90, behavior:"smooth"});
    }, 700);
  });

  $('resetBtn').addEventListener('click', ()=>{
    $('username').value = "";
    confirmBox.style.display = "none";
    loader.style.display = "none";
    report.style.display = "none";
    toast("ØªÙ… Ø§Ù„Ù…Ø³Ø­");
  });

  $('buildReportBtn').addEventListener('click', ()=>{
    const u = sanitizeUsername($('username').value);
    const type = $('acctType').value;
    const goal = $('goal').value;
    const followers = parseInt(($('followers').value||"0"),10);
    if(!u){ toast("Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù… ØµØ­ÙŠØ­"); return; }
    if(!followers || followers < 1){ toast("Ø£Ø¯Ø®Ù„ Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ†"); return; }

    const likeRate = parseFloat($('likesPct').value);
    const commentRate = parseFloat($('commentsPct').value);

    const r = calcReport({followers, likeRate, commentRate, type, goal, username:u});

    $('title').textContent = `ØªØ­Ù„ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø¥Ù†Ø³ØªØºØ±Ø§Ù… (@${r.username})`;
    $('subtitle').textContent = `Engagement: ${r.er.toFixed(2)}% â€” Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©: ${r.b.note}`;
    $('scoreNum').textContent = r.score;
    $('scoreLabel').textContent = "Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: " + labelScore(r.score);
    $('benchmark').textContent = `${r.b.note} (Ø­Ø³Ø§Ø¨Ùƒ: ${r.er.toFixed(2)}%)`;

    $('followersText').textContent = followers.toLocaleString('ar');
    $('likeRateText').textContent = likeRate.toFixed(2) + "%";
    $('commentRateText').textContent = commentRate.toFixed(2) + "%";

    setMeter(r.score);

    $('diagnosis').textContent = r.diag.txt;

    const weak = $('weakPoints'); weak.innerHTML = "";
    r.diag.weak.forEach(x=>{
      const li = document.createElement('li');
      li.textContent = x;
      weak.appendChild(li);
    });

    const recs = $('recs'); recs.innerHTML = "";
    r.recs.forEach(x=>{
      const li = document.createElement('li');
      li.textContent = x;
      recs.appendChild(li);
    });

    $('testPlan').textContent = r.plan;

    report.style.display = "block";
    toast("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± âœ…");
    window.scrollTo({top: report.offsetTop - 85, behavior:"smooth"});

    window.__reportText =
`MarketAPro â€” ØªØ­Ù„ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø¥Ù†Ø³ØªØºØ±Ø§Ù… (@${r.username})

Ø§Ù„Ù…ØªØ§Ø¨Ø¹ÙˆÙ†: ${followers.toLocaleString('ar')}
Like Rate: ${likeRate.toFixed(2)}%
Comment Rate: ${commentRate.toFixed(2)}%
Engagement: ${r.er.toFixed(2)}%

Score: ${r.score}/100 â€” ${labelScore(r.score)}
Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©: ${r.b.note}

ØªØ´Ø®ÙŠØµ:
${r.diag.txt}

Ù†Ù‚Ø§Ø· ØªØ­Ø³ÙŠÙ†:
- ${r.diag.weak.join("\n- ")}

ØªÙˆØµÙŠØ§Øª:
- ${r.recs.join("\n- ")}

Ø®Ø·Ø© Ø§Ø®ØªØ¨Ø§Ø± 14 ÙŠÙˆÙ…:
${r.plan}
`;
  });

  $('copyReportBtn').addEventListener('click', ()=>{
    if(!window.__reportText){ toast("Ø£Ù†Ø´Ø¦ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø£ÙˆÙ„Ù‹Ø§"); return; }
    copyText(window.__reportText);
  });
</script>
</body>
</html>
